import{d as J,r as c,m as R,l as K,o as W,u as S,x as X,c as a,b as s,i as p,t as i,F as k,j,f as T,p as M,q as d,v as u,z as Y,a as m,n as P,k as l,_ as Z}from"./index-BIsFjUzH.js";const ss={class:"admin-dashboard"},es={class:"dashboard-header"},ts={class:"header-container"},os={class:"header-right"},as={key:0,class:"user-email"},ls={class:"dashboard-nav"},ns={class:"nav-container"},rs=["onClick"],is={class:"tab-icon"},ds={class:"tab-label"},us={class:"dashboard-content"},cs={class:"content-container"},ps={key:0,class:"tab-content"},ms={class:"tab-header"},vs={key:0,class:"loading"},fs={key:1,class:"projects-grid"},bs={class:"project-image"},_s=["src","alt"],gs={key:0,class:"featured-badge"},ys={class:"project-content"},hs={class:"project-title"},ks={class:"project-description"},js={class:"project-technologies"},Ps={class:"project-actions"},ws=["onClick"],Cs=["onClick"],xs={key:1,class:"tab-content"},Us={key:0,class:"loading"},Vs={class:"form-row"},Es={class:"form-group"},Ms={class:"form-group"},qs={class:"form-group"},Ds={class:"form-row"},Is={class:"form-group"},Ls={class:"form-group"},Ns={class:"form-row"},Rs={class:"form-group"},Ss={class:"form-group"},Ts={class:"form-group"},$s=["disabled"],zs={key:0,class:"loading-spinner"},Gs={key:1},Os={key:2},As={key:2,class:"tab-content"},Bs={class:"tab-header"},Fs={class:"messages-stats"},Hs={class:"stat"},Qs={class:"stat new"},Js={key:0,class:"loading"},Ks={key:1,class:"messages-list"},Ws={class:"message-header"},Xs={class:"message-info"},Ys={class:"message-sender"},Zs={class:"message-email"},se={class:"message-meta"},ee={class:"message-date"},te={class:"message-content"},oe={class:"message-subject"},ae={class:"message-text"},le={class:"message-actions"},ne=["href"],re=["onClick"],ie={key:0,class:"empty-state"},de={class:"modal-header"},ue={class:"modal-title"},ce={class:"form-group"},pe={class:"form-group"},me={class:"form-group"},ve={class:"form-row"},fe={class:"form-group"},be={class:"form-group"},_e={class:"form-group"},ge={class:"form-group"},ye={class:"checkbox-label"},he={class:"modal-actions"},ke=["disabled"],je={key:0,class:"loading-spinner"},Pe={key:1},we={key:2},Ce=J({__name:"Dashboard",setup(xe){const q=X(),w=c(null),b=c("projects"),D=c([]),C=c(!0),x=c(!1),v=c(null),_=c(!1),$=c(null),U=c(!0),g=c(!1),y=c([]),V=c(!0),z=[{id:"projects",label:"Proyectos",icon:"🚀"},{id:"personal",label:"Información Personal",icon:"👤"},{id:"messages",label:"Mensajes",icon:"💬"}],n=R({title:"",description:"",image_url:"",project_url:"",github_url:"",technologies:[],featured:!1}),r=R({name:"",title:"",bio:"",email:"",phone:"",location:"",avatar_url:"",resume_url:""}),I=K({get:()=>n.technologies.join(", "),set:o=>{n.technologies=o.split(",").map(e=>e.trim()).filter(e=>e)}}),E=async()=>{try{C.value=!0,D.value=await m.getProjects()}catch(o){console.error("Error loading projects:",o)}finally{C.value=!1}},G=async()=>{try{U.value=!0;const o=await m.getPersonalInfo();o&&($.value=o,Object.assign(r,o))}catch(o){console.error("Error loading personal info:",o)}finally{U.value=!1}},L=async()=>{try{V.value=!0,y.value=await m.getContactMessages()}catch(o){console.error("Error loading messages:",o)}finally{V.value=!1}},N=o=>{o?(v.value=o,Object.assign(n,o)):(v.value=null,Object.assign(n,{title:"",description:"",image_url:"",project_url:"",github_url:"",technologies:[],featured:!1})),x.value=!0},h=()=>{x.value=!1,v.value=null},O=async()=>{try{_.value=!0;const o={title:n.title,description:n.description,image_url:n.image_url,project_url:n.project_url||void 0,github_url:n.github_url||void 0,technologies:n.technologies,featured:n.featured};v.value?await m.updateProject(v.value.id,o):await m.createProject(o),await E(),h()}catch(o){console.error("Error saving project:",o)}finally{_.value=!1}},A=async o=>{if(confirm("¿Estás seguro de que quieres eliminar este proyecto?"))try{await m.deleteProject(o),await E()}catch(e){console.error("Error deleting project:",e)}},B=async()=>{try{g.value=!0,await m.updatePersonalInfo(r),alert("Información actualizada exitosamente")}catch(o){console.error("Error updating personal info:",o),alert("Error al actualizar la información")}finally{g.value=!1}},F=async o=>{try{await m.updateMessageStatus(o,"read"),await L()}catch(e){console.error("Error updating message status:",e)}},H=o=>new Date(o).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),Q=async()=>{confirm("¿Estás seguro de que quieres cerrar sesión?")&&(await S.auth.signOut(),q.push("/admin"))};return W(async()=>{const{data:{session:o}}=await S.auth.getSession();if(!o){q.push("/admin");return}w.value=o.user,await Promise.all([E(),G(),L()])}),(o,e)=>(l(),a("div",ss,[s("header",es,[s("div",ts,[e[17]||(e[17]=s("div",{class:"header-left"},[s("div",{class:"logo"},[s("span",{class:"logo-text"},"MS")]),s("h1",{class:"dashboard-title"},"Panel de Administración")],-1)),s("div",os,[w.value?(l(),a("span",as,i(w.value.email),1)):p("",!0),s("button",{onClick:Q,class:"logout-btn"}," Cerrar Sesión ")])])]),s("nav",ls,[s("div",ns,[(l(),a(k,null,j(z,t=>s("button",{key:t.id,onClick:f=>b.value=t.id,class:P(["nav-tab",{active:b.value===t.id}])},[s("span",is,i(t.icon),1),s("span",ds,i(t.label),1)],10,rs)),64))])]),s("main",us,[s("div",cs,[b.value==="projects"?(l(),a("div",ps,[s("div",ms,[e[19]||(e[19]=s("h2",{class:"tab-title"},"Gestión de Proyectos",-1)),s("button",{onClick:e[0]||(e[0]=t=>N()),class:"add-btn"},e[18]||(e[18]=[s("span",{class:"btn-icon"},"➕",-1),T(" Nuevo Proyecto ")]))]),C.value?(l(),a("div",vs,e[20]||(e[20]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Cargando proyectos...",-1)]))):(l(),a("div",fs,[(l(!0),a(k,null,j(D.value,t=>(l(),a("div",{key:t.id,class:P(["project-card",{featured:t.featured}])},[s("div",bs,[s("img",{src:t.image_url,alt:t.title},null,8,_s),t.featured?(l(),a("div",gs,"⭐ Destacado")):p("",!0)]),s("div",ys,[s("h3",hs,i(t.title),1),s("p",ks,i(t.description),1),s("div",js,[(l(!0),a(k,null,j(t.technologies,f=>(l(),a("span",{key:f,class:"tech-tag"},i(f),1))),128))]),s("div",Ps,[s("button",{onClick:f=>N(t),class:"action-btn edit-btn"}," ✏️ Editar ",8,ws),s("button",{onClick:f=>A(t.id),class:"action-btn delete-btn"}," 🗑️ Eliminar ",8,Cs)])])],2))),128))]))])):p("",!0),b.value==="personal"?(l(),a("div",xs,[e[30]||(e[30]=s("div",{class:"tab-header"},[s("h2",{class:"tab-title"},"Información Personal")],-1)),U.value?(l(),a("div",Us,e[21]||(e[21]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Cargando información...",-1)]))):(l(),a("form",{key:1,onSubmit:M(B,["prevent"]),class:"personal-form"},[s("div",Vs,[s("div",Es,[e[22]||(e[22]=s("label",{class:"form-label"},"Nombre Completo",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.name=t),type:"text",class:"form-input",required:""},null,512),[[u,r.name]])]),s("div",Ms,[e[23]||(e[23]=s("label",{class:"form-label"},"Título Profesional",-1)),d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.title=t),type:"text",class:"form-input",required:""},null,512),[[u,r.title]])])]),s("div",qs,[e[24]||(e[24]=s("label",{class:"form-label"},"Biografía",-1)),d(s("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.bio=t),class:"form-input form-textarea",rows:"6",required:""},null,512),[[u,r.bio]])]),s("div",Ds,[s("div",Is,[e[25]||(e[25]=s("label",{class:"form-label"},"Email",-1)),d(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>r.email=t),type:"email",class:"form-input",required:""},null,512),[[u,r.email]])]),s("div",Ls,[e[26]||(e[26]=s("label",{class:"form-label"},"Teléfono",-1)),d(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>r.phone=t),type:"tel",class:"form-input"},null,512),[[u,r.phone]])])]),s("div",Ns,[s("div",Rs,[e[27]||(e[27]=s("label",{class:"form-label"},"Ubicación",-1)),d(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.location=t),type:"text",class:"form-input"},null,512),[[u,r.location]])]),s("div",Ss,[e[28]||(e[28]=s("label",{class:"form-label"},"URL del Avatar",-1)),d(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>r.avatar_url=t),type:"url",class:"form-input"},null,512),[[u,r.avatar_url]])])]),s("div",Ts,[e[29]||(e[29]=s("label",{class:"form-label"},"URL del CV",-1)),d(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>r.resume_url=t),type:"url",class:"form-input"},null,512),[[u,r.resume_url]])]),s("button",{type:"submit",class:"submit-btn",disabled:g.value},[g.value?(l(),a("span",zs)):p("",!0),g.value?(l(),a("span",Gs,"Guardando...")):(l(),a("span",Os,"Guardar Cambios"))],8,$s)],32))])):p("",!0),b.value==="messages"?(l(),a("div",As,[s("div",Bs,[e[31]||(e[31]=s("h2",{class:"tab-title"},"Mensajes de Contacto",-1)),s("div",Fs,[s("span",Hs," Total: "+i(y.value.length),1),s("span",Qs," Nuevos: "+i(y.value.filter(t=>t.status==="new").length),1)])]),V.value?(l(),a("div",Js,e[32]||(e[32]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Cargando mensajes...",-1)]))):(l(),a("div",Ks,[(l(!0),a(k,null,j(y.value,t=>(l(),a("div",{key:t.id,class:P(["message-card",{new:t.status==="new"}])},[s("div",Ws,[s("div",Xs,[s("h3",Ys,i(t.name),1),s("p",Zs,i(t.email),1)]),s("div",se,[s("span",ee,i(H(t.created_at)),1),s("span",{class:P(["message-status",t.status])},i(t.status==="new"?"Nuevo":"Leído"),3)])]),s("div",te,[s("h4",oe,i(t.subject),1),s("p",ae,i(t.message),1)]),s("div",le,[s("a",{href:`mailto:${t.email}?subject=Re: ${t.subject}`,class:"action-btn reply-btn"}," 📧 Responder ",8,ne),t.status==="new"?(l(),a("button",{key:0,onClick:f=>F(t.id),class:"action-btn read-btn"}," ✓ Marcar como leído ",8,re)):p("",!0)])],2))),128)),y.value.length===0?(l(),a("div",ie,e[33]||(e[33]=[s("div",{class:"empty-icon"},"📭",-1),s("h3",null,"No hay mensajes",-1),s("p",null,"Los mensajes de contacto aparecerán aquí.",-1)]))):p("",!0)]))])):p("",!0)])]),x.value?(l(),a("div",{key:0,class:"modal-overlay",onClick:h},[s("div",{class:"modal-content",onClick:e[16]||(e[16]=M(()=>{},["stop"]))},[s("div",de,[s("h3",ue,i(v.value?"Editar Proyecto":"Nuevo Proyecto"),1),s("button",{onClick:h,class:"modal-close"},"✕")]),s("form",{onSubmit:M(O,["prevent"]),class:"project-form"},[s("div",ce,[e[34]||(e[34]=s("label",{class:"form-label"},"Título del Proyecto",-1)),d(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>n.title=t),type:"text",class:"form-input",required:""},null,512),[[u,n.title]])]),s("div",pe,[e[35]||(e[35]=s("label",{class:"form-label"},"Descripción",-1)),d(s("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>n.description=t),class:"form-input form-textarea",rows:"4",required:""},null,512),[[u,n.description]])]),s("div",me,[e[36]||(e[36]=s("label",{class:"form-label"},"URL de la Imagen",-1)),d(s("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>n.image_url=t),type:"url",class:"form-input",required:""},null,512),[[u,n.image_url]])]),s("div",ve,[s("div",fe,[e[37]||(e[37]=s("label",{class:"form-label"},"URL del Proyecto",-1)),d(s("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>n.project_url=t),type:"url",class:"form-input"},null,512),[[u,n.project_url]])]),s("div",be,[e[38]||(e[38]=s("label",{class:"form-label"},"URL de GitHub",-1)),d(s("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>n.github_url=t),type:"url",class:"form-input"},null,512),[[u,n.github_url]])])]),s("div",_e,[e[39]||(e[39]=s("label",{class:"form-label"},"Tecnologías (separadas por comas)",-1)),d(s("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>I.value=t),type:"text",class:"form-input",placeholder:"Vue.js, Node.js, PostgreSQL"},null,512),[[u,I.value]])]),s("div",ge,[s("label",ye,[d(s("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>n.featured=t),type:"checkbox",class:"checkbox-input"},null,512),[[Y,n.featured]]),e[40]||(e[40]=s("span",{class:"checkbox-custom"},null,-1)),e[41]||(e[41]=T(" Proyecto Destacado "))])]),s("div",he,[s("button",{type:"button",onClick:h,class:"cancel-btn"}," Cancelar "),s("button",{type:"submit",class:"save-btn",disabled:_.value},[_.value?(l(),a("span",je)):p("",!0),_.value?(l(),a("span",Pe,"Guardando...")):(l(),a("span",we,i(v.value?"Actualizar":"Crear")+" Proyecto",1))],8,ke)])],32)])])):p("",!0)]))}}),Ve=Z(Ce,[["__scopeId","data-v-ab2fc4ff"]]);export{Ve as default};
